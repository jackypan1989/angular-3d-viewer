/**
 * Angular 3d Viewer
 * @version v0.0.1 - 2014-04-16
 * @link http://jackypan1989.github.com/angular-3d-viewer
 * @author Guan Yu Pan
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("angular-3d-viewer",[]),angular.module("angular-3d-viewer").directive("hello",function(){return{restrict:"E",replace:!0,template:'<canvas id="mainCanvas"></canvas>',link:function(a){function b(){e=new THREE.WebGLRenderer({canvas:document.getElementById("mainCanvas")}),e.setSize(l,m),e.setClearColor(15658734),f=new THREE.Scene,g=new THREE.PerspectiveCamera(75,l/m,1,1e4),g.position.set(0,0,70),f.add(g),h=new THREE.TrackballControls(g,document.getElementById("mainCanvas")),h.addEventListener("change",d);var a=new THREE.DirectionalLight(16777215);a.position.x=0,a.position.y=0,a.position.z=1,a.position.normalize(),f.add(a);var b=(new THREE.MeshPhongMaterial({ambient:5592405,color:11184810,specular:1118481,shininess:200}),new THREE.STLLoader);b.addEventListener("load",function(a){var b=a.content;b.computeFaceNormals(),i[j]=new THREE.Mesh(b,new THREE.MeshNormalMaterial({overdraw:!0})),i[j].position=new THREE.Vector3(0,-30,0),f.add(i[j]),c()}),b.load("./models/PokeBall.stl")}function c(){if(n)for(var a=0;a<i.length;a++)i[a].rotation.y+=.01;requestAnimationFrame(c),h.update(),d()}function d(){e.render(f,g)}var e,f,g,h,i=[],j=0,k=0,l=800,m=600,n=!1;b(),a.viewFromTop=function(){g.position.set(0,50,0);var a=new THREE.Vector3(0,0,0);g.lookAt(a)},a.viewFromBottom=function(){g.position.set(0,-100,0);var a=new THREE.Vector3(0,0,0);g.lookAt(a)},a.viewFromSide=function(){g.position.set(0,0,70);var a=new THREE.Vector3(0,0,0);g.lookAt(a)},a.nextStep=function(){k++,k>i.length-1&&(k=0);for(var a=0;a<i.length;a++)i[a].visible=!1;i[k].visible=!0},a.play=function(){n=!0},a.stop=function(){n=!1}}}});